(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2732:function(e,t,a){Promise.resolve().then(a.bind(a,6683))},6683:function(e,t,a){"use strict";a.d(t,{default:function(){return v}});var n=a(7437),r=a(2265),o=a(3810);function s(e){switch(e){case"past":return"bg-zinc-200/55";case"today":return"bg-cyan-500";case"future":return"border border-zinc-200/60 bg-white/15"}}function l(e){let{day:t,onHover:a,onMove:r,onLeave:l}=e,i="relative aspect-square w-full cursor-pointer rounded-[2px] transition-[transform,filter,background-color,border-color] duration-150 ease-out will-change-transform hover:z-10 hover:scale-[1.12] hover:brightness-105";return"today"===t.state?(0,n.jsx)(o.E.div,{role:"gridcell","aria-label":t.label,className:"".concat(i," ").concat(s(t.state)),animate:{opacity:[.92,1,.92],boxShadow:["0 0 0px rgba(6, 182, 212, 0.0)","0 0 26px rgba(6, 182, 212, 0.35)","0 0 0px rgba(6, 182, 212, 0.0)"]},transition:{duration:2.8,ease:"easeInOut",repeat:1/0},onMouseEnter:e=>a(t,e),onMouseMove:e=>r(t,e),onMouseLeave:l}):(0,n.jsx)("div",{role:"gridcell","aria-label":t.label,className:"".concat(i," ").concat(s(t.state)),onMouseEnter:e=>a(t,e),onMouseMove:e=>r(t,e),onMouseLeave:l})}var i=a(9778),c=a(9747),u=a(4405),d=a(1519),m=a(7912),h=a(2960),f=a(888),x=a(6496),M=a(8986),b=a(4926);function g(e,t,a){return Math.min(a,Math.max(t,e))}function v(){let{percent:e,remaining:t,days:a}=function(){let[e,t]=(0,r.useState)(()=>new Date);(0,r.useEffect)(()=>{let e=window.setInterval(()=>t(new Date),1e3);return()=>window.clearInterval(e)},[]);let a=(0,r.useMemo)(()=>(0,i.e)(e),[e]),n=(0,r.useMemo)(()=>(0,c.w)(e),[e]),o=(0,r.useMemo)(()=>(0,u.b)(e),[e]),s=(0,r.useMemo)(()=>(0,d.i)(e),[e]),l=(0,r.useMemo)(()=>(0,m.c)(s,o)+1,[s,o]),g=(0,r.useMemo)(()=>Math.max(0,(0,m.c)(s,e)),[e,s]);(0,r.useMemo)(()=>l<=0?1:Math.min(1,Math.max(0,(l-g)/l)),[g,l]);let v=(0,r.useMemo)(()=>Math.max(0,(0,m.c)(n,e)),[e,n]),y=(0,r.useMemo)(()=>(function(e){let t=Math.max(0,e);return{days:Math.floor(t/86400),hours:Math.floor(t%86400/3600),minutes:Math.floor(t%3600/60),seconds:t%60}})(v),[v]),p=(0,r.useMemo)(()=>{let t=(0,m.c)(n,a),r=(0,m.c)(e,a);return t<=0?100:Math.min(100,Math.max(0,r/t*100))},[e,n,a]),w=(0,r.useMemo)(()=>{let e=(0,h.B)(n);return(0,f.D)({start:a,end:n}).map(t=>{let a=(0,h.B)(t),n=(0,x.K)(t,o)?"today":(0,M.R)(t,o)?"past":"future",r=Math.max(0,e-a),s="".concat((0,b.WU)(t,"yyyy年MM月dd日")," \xb7 第").concat(a,"天");return{date:t,dayOfYear:a,state:n,daysLeft:r,label:s}})},[o,n,a]);return{now:e,yearStart:a,yearEnd:n,percent:p,remaining:y,days:w}}(),[o,s]=(0,r.useState)(null),v=(0,r.useRef)(null),y=(0,r.useRef)(null),[p,w]=(0,r.useState)(32),N=(0,r.useMemo)(()=>{var e;let t=a.find(e=>"today"===e.state);return null!==(e=null==t?void 0:t.dayOfYear)&&void 0!==e?e:1},[a]),j=(0,r.useMemo)(()=>"".concat(Math.floor(e).toString(),"%"),[e]),S=(0,r.useMemo)(()=>{let e=t.days.toString(),a=t.hours.toString().padStart(2,"0"),n=t.minutes.toString().padStart(2,"0"),r=t.seconds.toString().padStart(2,"0");return"剩余：".concat(e,"天 ").concat(a,"小时 ").concat(n,"分 ").concat(r,"秒")},[t.days,t.hours,t.minutes,t.seconds]);return(0,r.useEffect)(()=>{let e=v.current,t=y.current;if(!e||!t)return;let n=()=>{let n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),o=Math.max(0,n.width),s=Math.max(0,n.height-r.height-20),l=a.length,i=32,c=0;for(let e=18;e<=48;e+=1){let t=Math.floor((o-4*(e-1))/e);if(t<=2)continue;let a=Math.ceil(l/e);a*t+4*(a-1)<=s&&t>c&&(i=e,c=t)}0===c&&(i=g(Math.round(o/18),18,48)),w(e=>e===i?e:i)};n();let r=new ResizeObserver(()=>n());return r.observe(e),r.observe(t),()=>r.disconnect()},[a.length]),(0,n.jsxs)("div",{ref:v,className:"relative flex h-full w-full flex-col",children:[(0,n.jsx)("header",{ref:y,className:"mb-6 md:mb-8",children:(0,n.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,n.jsx)("div",{className:"text-[92px] font-semibold leading-none tracking-tight md:text-[132px]",children:(0,n.jsx)("span",{className:"font-mono tabular-nums",children:j})}),(0,n.jsx)("div",{className:"mt-3 text-sm text-zinc-600 md:text-lg",children:(0,n.jsx)("span",{className:"inline-block w-[30ch] font-mono tabular-nums",children:S})})]})}),(0,n.jsx)("div",{role:"grid","aria-label":"本年度每天网格",className:"grid w-full flex-1",style:{gridTemplateColumns:"repeat(".concat(p,", minmax(0, 1fr))"),gap:4},children:a.map(e=>(0,n.jsx)(l,{day:e,onHover:(e,t)=>{s({day:e,x:g(t.clientX+12,12,window.innerWidth-12),y:g(t.clientY+12,12,window.innerHeight-12)})},onMove:(e,t)=>{s(a=>{if(!a||a.day.dayOfYear!==e.dayOfYear)return a;let n=g(t.clientX+12,12,window.innerWidth-12),r=g(t.clientY+12,12,window.innerHeight-12);return{day:a.day,x:n,y:r}})},onLeave:()=>s(null)},e.dayOfYear))}),o?(0,n.jsxs)("div",{className:"pointer-events-none fixed z-50 w-max max-w-[80vw] rounded-md border border-zinc-200 bg-white/90 px-3 py-2 text-xs text-zinc-900 shadow-[0_10px_30px_rgba(0,0,0,0.12)] backdrop-blur",style:{left:o.x,top:o.y},children:[(0,n.jsx)("div",{className:"font-mono tabular-nums text-zinc-950",children:o.day.label}),(0,n.jsx)("div",{className:"mt-1 text-zinc-600",children:"past"===o.day.state?"已过去 ".concat(Math.max(0,N-o.day.dayOfYear)," 天"):"today"===o.day.state?"今天":"还剩 ".concat(o.day.daysLeft," 天")})]}):null]})}}},function(e){e.O(0,[218,971,117,744],function(){return e(e.s=2732)}),_N_E=e.O()}]);