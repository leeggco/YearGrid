(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{818:function(e,t,n){Promise.resolve().then(n.bind(n,9442)),Promise.resolve().then(n.t.bind(n,2894,23)),Promise.resolve().then(n.t.bind(n,7960,23))},9442:function(e,t,n){"use strict";n.d(t,{default:function(){return u}});var r=n(7437),l=n(7648),s=n(2265);function i(e){return/^\S+@\S+\.\S+$/.test(e.trim())}function a(e){return["mt-1 h-10 w-full rounded-lg border border-zinc-200 bg-white px-3 text-sm text-zinc-900 outline-none transition","placeholder:text-zinc-400 focus:border-zinc-300 focus:ring-2 focus:ring-zinc-900/10",e?"cursor-not-allowed bg-zinc-50 text-zinc-500":""].filter(Boolean).join(" ")}function o(e){let{onLogin:t,onRegister:n}=e;return(0,r.jsx)("header",{className:"sticky top-0 z-50 w-full border-b border-zinc-200/60 bg-white/80 backdrop-blur-md",children:(0,r.jsxs)("div",{className:"app-container flex h-16 items-center justify-between",children:[(0,r.jsxs)(l.default,{href:"/",className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"flex h-9 w-9 items-center justify-center rounded-lg text-xs font-bold text-white",style:{background:"linear-gradient(135deg, rgb(5 150 105), rgb(14 116 144))"},children:"YG"}),(0,r.jsx)("span",{className:"text-base font-semibold text-zinc-900",children:"此间"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("button",{type:"button",className:"rounded-lg border border-zinc-200 bg-white px-4 py-2 text-sm text-zinc-900 transition-colors hover:bg-zinc-100/70",onClick:t,children:"登录"}),(0,r.jsx)("button",{type:"button",className:"rounded-lg px-4 py-2 text-sm text-white transition-colors",style:{background:"linear-gradient(135deg, rgb(5 150 105), rgb(14 116 144))"},onClick:n,children:"注册"})]})]})})}function c(e){let{authMode:t,message:n,setModalRef:l,titleId:s,descriptionId:i,modalTitle:o,primaryButtonText:c,loginEmail:u,setLoginEmail:d,loginPassword:m,setLoginPassword:x,registerNickname:g,setRegisterNickname:b,registerEmail:h,setRegisterEmail:p,registerPassword:f,setRegisterPassword:j,forgotEmail:k,setForgotEmail:N,setMessage:v,setAuthMode:w,onClose:y,onSubmit:z}=e;return(0,r.jsx)("div",{className:"fixed inset-0 z-[60] flex items-end justify-center bg-black/20 p-4 md:items-center",onMouseDown:e=>{e.target===e.currentTarget&&y()},children:(0,r.jsxs)("div",{ref:l,tabIndex:-1,role:"dialog","aria-modal":"true","aria-labelledby":s,"aria-describedby":i,className:"w-full max-w-[420px] rounded-2xl border border-zinc-200/70 bg-white/90 p-4 shadow-[0_22px_70px_rgba(0,0,0,0.14)] backdrop-blur-xl outline-none",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{id:s,className:"text-sm font-medium text-zinc-950",children:o}),(0,r.jsx)("div",{id:i,className:"mt-1 text-xs text-zinc-500",children:"login"===t?"使用邮箱与密码登录":"register"===t?"创建账号后可在多设备同步（后续接入）":"输入邮箱以接收重置密码邮件"})]}),(0,r.jsx)("button",{type:"button",className:"rounded-lg px-2 py-1 text-xs text-zinc-500 hover:bg-white hover:text-zinc-800",onClick:y,children:"关闭"})]}),(0,r.jsxs)("form",{className:"mt-4 space-y-3",onSubmit:z,children:["login"===t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("label",{className:"block",children:[(0,r.jsx)("span",{className:"text-xs font-medium text-zinc-700",children:"邮箱"}),(0,r.jsx)("input",{type:"email",inputMode:"email",autoComplete:"email",className:a(),value:u,onChange:e=>d(e.target.value),placeholder:"name@example.com",required:!0})]}),(0,r.jsxs)("label",{className:"block",children:[(0,r.jsx)("span",{className:"text-xs font-medium text-zinc-700",children:"密码"}),(0,r.jsx)("input",{type:"password",autoComplete:"current-password",className:a(),value:m,onChange:e=>x(e.target.value),placeholder:"请输入密码",required:!0})]})]}):null,"register"===t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("label",{className:"block",children:[(0,r.jsx)("span",{className:"text-xs font-medium text-zinc-700",children:"昵称"}),(0,r.jsx)("input",{type:"text",autoComplete:"nickname",className:a(),value:g,onChange:e=>b(e.target.value),placeholder:"怎么称呼你",required:!0,maxLength:24})]}),(0,r.jsxs)("label",{className:"block",children:[(0,r.jsx)("span",{className:"text-xs font-medium text-zinc-700",children:"邮箱"}),(0,r.jsx)("input",{type:"email",inputMode:"email",autoComplete:"email",className:a(),value:h,onChange:e=>p(e.target.value),placeholder:"name@example.com",required:!0})]}),(0,r.jsxs)("label",{className:"block",children:[(0,r.jsx)("span",{className:"text-xs font-medium text-zinc-700",children:"密码"}),(0,r.jsx)("input",{type:"password",autoComplete:"new-password",className:a(),value:f,onChange:e=>j(e.target.value),placeholder:"至少 6 位",required:!0,minLength:6})]})]}):null,"forgot"===t?(0,r.jsxs)("label",{className:"block",children:[(0,r.jsx)("span",{className:"text-xs font-medium text-zinc-700",children:"邮箱"}),(0,r.jsx)("input",{type:"email",inputMode:"email",autoComplete:"email",className:a(),value:k,onChange:e=>N(e.target.value),placeholder:"name@example.com",required:!0})]}):null,n?(0,r.jsx)("div",{className:"rounded-lg border px-3 py-2 text-xs ".concat("error"===n.kind?"border-rose-200 bg-rose-50 text-rose-700":"border-emerald-200 bg-emerald-50 text-emerald-700"),children:n.text}):null,(0,r.jsx)("button",{type:"submit",className:"h-10 w-full rounded-xl bg-zinc-900 text-sm font-medium text-white hover:bg-zinc-800",children:c}),(0,r.jsxs)("div",{className:"flex items-center justify-between gap-3 text-xs",children:["login"===t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{type:"button",className:"text-zinc-500 hover:text-zinc-800",onClick:()=>{v(null),N(u.trim()),w("forgot")},children:"忘记密码？"}),(0,r.jsx)("button",{type:"button",className:"text-zinc-500 hover:text-zinc-800",onClick:()=>{v(null),w("register")},children:"没有账号？去注册"})]}):null,"register"===t?(0,r.jsx)("button",{type:"button",className:"ml-auto text-zinc-500 hover:text-zinc-800",onClick:()=>{v(null),d(h.trim()),w("login")},children:"已有账号？去登录"}):null,"forgot"===t?(0,r.jsx)("button",{type:"button",className:"ml-auto text-zinc-500 hover:text-zinc-800",onClick:()=>{v(null),d(k.trim()),w("login")},children:"返回登录"}):null]})]})]})})}function u(){let[e,t]=(0,s.useState)(null),[n,l]=(0,s.useState)(null),a=(0,s.useRef)(null),u=(0,s.useRef)(null),d=(0,s.useCallback)(e=>{a.current=e},[]),[m,x]=(0,s.useState)(""),[g,b]=(0,s.useState)(""),[h,p]=(0,s.useState)(""),[f,j]=(0,s.useState)(""),[k,N]=(0,s.useState)(""),[v,w]=(0,s.useState)(""),y=(0,s.useId)(),z=(0,s.useId)(),C=e=>{u.current=document.activeElement instanceof HTMLElement?document.activeElement:null,l(null),t(e)},E=()=>{t(null),l(null)},S=(0,s.useMemo)(()=>"login"===e?"登录":"register"===e?"注册":"forgot"===e?"找回密码":"",[e]);(0,s.useEffect)(()=>{if(!e)return;requestAnimationFrame(()=>{var e;let t=a.current;if(!t)return;let n=null!==(e=t.querySelector("input:not([disabled]), textarea:not([disabled])"))&&void 0!==e?e:t.querySelector("button:not([disabled])");null==n||n.focus()});let t=e=>{"Escape"===e.key&&E()};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e]),(0,s.useEffect)(()=>{var t;e||null===(t=u.current)||void 0===t||t.focus()},[e]);let M=(0,s.useMemo)(()=>"login"===e?"登录":"register"===e?"创建账号":"forgot"===e?"发送重置邮件":"",[e]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o,{onLogin:()=>C("login"),onRegister:()=>C("register")}),e?(0,r.jsx)(c,{authMode:e,message:n,setModalRef:d,titleId:y,descriptionId:z,modalTitle:S,primaryButtonText:M,loginEmail:m,setLoginEmail:x,loginPassword:g,setLoginPassword:b,registerNickname:h,setRegisterNickname:p,registerEmail:f,setRegisterEmail:j,registerPassword:k,setRegisterPassword:N,forgotEmail:v,setForgotEmail:w,setMessage:l,setAuthMode:t,onClose:E,onSubmit:t=>{if(t.preventDefault(),l(null),"login"===e){let e=m.trim();if(!e||!g){l({kind:"error",text:"请填写邮箱与密码。"});return}if(!i(e)){l({kind:"error",text:"邮箱格式不正确。"});return}l({kind:"ok",text:"登录请求已提交（UI 演示）。"});return}if("register"===e){let e=h.trim(),t=f.trim();if(!e||!t||!k){l({kind:"error",text:"请填写昵称、邮箱与密码。"});return}if(e.length>24){l({kind:"error",text:"昵称过长（最多 24 字）。"});return}if(!i(t)){l({kind:"error",text:"邮箱格式不正确。"});return}if(k.length<6){l({kind:"error",text:"密码至少 6 位。"});return}l({kind:"ok",text:"注册请求已提交（UI 演示）。"});return}if("forgot"===e){let e=v.trim();if(!e){l({kind:"error",text:"请填写邮箱。"});return}if(!i(e)){l({kind:"error",text:"邮箱格式不正确。"});return}l({kind:"ok",text:"已发送重置邮件（UI 演示）。"})}}}):null]})}},7960:function(){}},function(e){e.O(0,[956,895,971,117,744],function(){return e(e.s=818)}),_N_E=e.O()}]);